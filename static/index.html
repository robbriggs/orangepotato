<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-GB" ng-app>
	<head>
		<title>OrangePotato | Presentation Streaming</title>
		<meta name="viewport" content="width=550, user-scalable=no" />
		<!--<link href="bootstrap-combined.min.css" rel="stylesheet">-->
		<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet" />
    <link href="css/flat-ui.css" rel="stylesheet">
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
		<script src="js/qrcode.js"></script>

    <script src="/socket.io/socket.io.js"></script>
    <script type="text/javascript" src="../js/easyrtc.js"></script>
    <script type="text/javascript" src="js/present.js"></script>

    <link href="css/style.css" rel="stylesheet">

		<script>
			$(document).ready(function () {
				$('.alert').hide();
				$('#ch-qrcode-form').hide();
				$('#new_present_form').submit(function (e) {
					e.preventDefault();
					var id = $('#slideshare_url').val();
					id = id.substring(id.indexOf('embed_code') + 10);
					id = id.substring(0, id.indexOf('"'));
					window.location = '/slideshare' + id;
				});

				silentConnect();
				console.log(selfEasyrtcid);
			});

			var slide

			function slidesharesubpress() {
				var theyvegivenme = $('#slideshare_url').val();
				console.log("From text = "+theyvegivenme);
				console.log('/get-slideshare-id?slideshare_url='+theyvegivenme);
				$.getJSON('/get-slideshare-id?slideshare_url='+theyvegivenme, function(data) {
					if (data.error) {
						$('#slideshare_url_control_group').addClass("error");
						$('#slideshare_url').val("Invalid url, try again");
					}else{
						$('#pres-url-form').fadeOut('slow', function() {
							$('#ch-qrcode-form').fadeIn('slow', function() {});
						});
					}
				});
			}

			function slideshareurlpress() {
				if ( $('#slideshare_url_control_group').hasClass("error") ) {
					$('#slideshare_url_control_group').removeClass("error");
					$('#slideshare_url').val("");
				}
			}

		</script>
		<script src="slideshare.js"></script>
	</head>
	<body>
		<div class="container">
			<div class="hero-unit">
				<div id="pres-url-form">
					<h1>OrangePotato</h1>
					<p>Stream your presentation to anyone, anywhere</p>
					<br />
					<div class="alert alert-error">
						Your Browser is not supported
					</div>
					<form class="input-append" id="new_present_form">
						<div class="control-group" id="slideshare_url_control_group">
							<input type="text" class="input-xlarge search-query" placeholder="Paste a Slideshare embed code here" id="slideshare_url" name="slideshare_url" onclick="slideshareurlpress()"/>
							<input type="button" class="btn btn-primary" value="Present" id="slidesharesub" onclick="slidesharesubpress()" />
						</div>
						
					</form>
				</div>
				<div id="ch-qrcode-form">
					<div id="qrcode" class="center-bg"></div>
					<h1>Scan This</h1>
					<p>With your mobile phone</p>
				</div>
			</div>
		</div>

    <div id="demoContainer">
        <div id="connectControls">
            <div id="qrcode"></div>
            <br />
            <strong>Connected users:</strong>
            <div id="otherClients"></div>

        </div>
    </div>

	</body>
</html>